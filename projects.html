<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Projects | Arab Contractors</title>
  <style>
    :root{
      --bg: #f7f7f8;
      --text: #1b1f23;
      --muted: #6b7280;
      --card: #ffffff;
      --border: #e5e7eb;
      --gold: #c9a227;
      --gold-600: #b6911f;
      --shadow: 0 8px 24px rgba(0,0,0,0.08);
      --shadow-lg: 0 14px 38px rgba(0,0,0,0.12);
      --overlay: rgba(9,11,15,0.45);
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg: #0f1216;
        --text: #e7eaee;
        --muted: #a3acb9;
        --card: #161b22;
        --border: #283040;
        --shadow: 0 10px 30px rgba(0,0,0,0.45);
        --shadow-lg: 0 18px 46px rgba(0,0,0,0.5);
        --overlay: rgba(0,0,0,0.55);
      }
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .page{
      max-width: 1200px;
      padding: 32px 20px 56px;
      margin: 0 auto;
    }

    .header{
      display:flex; align-items:flex-end; justify-content:space-between; gap:16px; margin-bottom:20px;
      flex-wrap:wrap;
    }
    .title{
      display:flex; align-items:center; gap:12px;
    }
    .title-badge{
      width:40px; height:40px; border-radius:12px;
      background: linear-gradient(135deg, var(--gold), var(--gold-600));
      display:grid; place-items:center; box-shadow: var(--shadow);
      color:white;
    }
    .title h1{
      margin:0; font-size: clamp(22px, 3vw, 28px); letter-spacing: 0.2px;
    }
    .subtitle{
      margin:4px 0 0; color: var(--muted); font-size: 14px;
    }

    .filters{
      width:100%;
      display:flex; gap:12px; flex-wrap:wrap; align-items:center;
      background: var(--card);
      border:1px solid var(--border);
      border-radius:16px;
      padding:12px;
      box-shadow: var(--shadow);
    }
    .filter{
      position:relative; min-width: 220px; flex: 1 1 240px;
    }
    .label{
      display:block; font-size:12px; color:var(--muted); margin: 0 0 6px 4px; letter-spacing: .2px;
    }
    .select{
      position:relative;
    }
    .select select{
      appearance:none; -webkit-appearance:none; -moz-appearance:none;
      width:100%;
      padding:12px 44px 12px 14px;
      border-radius:12px;
      border:1px solid var(--border);
      background: var(--card);
      color: var(--text);
      font-size:14px;
      transition: border-color .25s ease, box-shadow .25s ease, transform .2s ease;
      outline: none;
    }
    .select select:hover{ transform: translateY(-1px) }
    .select select:focus{
      border-color: var(--gold);
      box-shadow: 0 0 0 4px color-mix(in oklab, var(--gold) 22%, transparent);
    }
    .select::after{
      content:"";
      position:absolute; right:12px; top:50%; transform: translateY(-4px);
      pointer-events:none; width: 10px; height: 10px;
      background:
        conic-gradient(from 45deg at 50% 50%, var(--muted) 0 90deg, #0000 0) 0 0/100% 100%;
      clip-path: polygon(50% 100%, 0 0, 100% 0);
    }
    .count{
      margin-left:auto; font-size:13px; color:var(--muted);
      padding:8px 10px; background: color-mix(in oklab, var(--card) 85%, var(--bg));
      border:1px solid var(--border); border-radius:10px;
    }

    /* Destination Tabs */
    .tabs{ display:flex; flex-wrap:wrap; gap:8px }
    .tab{
      appearance:none; -webkit-appearance:none;
      border:1px solid var(--border);
      background: transparent;
      color: var(--text);
      padding:10px 14px; border-radius:9999px;
      font-size:14px; letter-spacing:.2px;
      transition: background-color .25s ease, color .25s ease, border-color .25s ease, box-shadow .25s ease, transform .2s ease;
      cursor:pointer;
    }
    .tab:hover{
      background: linear-gradient(135deg, color-mix(in oklab, var(--gold) 88%, #fff 0%), var(--gold-600));
      color:#fff; border-color: color-mix(in oklab, var(--gold) 70%, var(--border));
      box-shadow: var(--shadow);
      transform: translateY(-1px);
    }
    .tab[aria-selected="true"]{
      background: linear-gradient(135deg, var(--gold), var(--gold-600));
      color:#fff; border-color: transparent;
      box-shadow: var(--shadow);
    }
    .tab:focus-visible{
      outline: none;
      box-shadow: 0 0 0 4px color-mix(in oklab, var(--gold) 22%, transparent);
    }

    .grid{
      margin-top:20px;
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 16px;
    }

    .project-card{
      position:relative;
      border-radius:16px;
      overflow:hidden;
      background: var(--card);
      border:1px solid var(--border);
      box-shadow: var(--shadow);
      transform: translateZ(0);
      transition: transform .25s ease, box-shadow .25s ease;
      isolation: isolate;
    }
    .project-card:hover{
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }
    .project-image{
      width:100%; height: 190px; object-fit:cover; display:block;
      background: #d1d5db;
    }
    .project-body{
      padding: 12px 12px 14px;
      display:flex; align-items:flex-start; justify-content:space-between; gap: 10px;
    }
    .project-info{
      min-width:0;
    }
    .project-title{
      margin:0 0 6px;
      font-size: 16px; font-weight: 700; letter-spacing: .2px;
    }
    .project-meta{
      font-size: 13px; color: var(--muted); display:flex; gap: 10px; align-items:center;
      white-space: nowrap; overflow:hidden; text-overflow: ellipsis;
    }
    .dot{
      width:6px; height:6px; border-radius:50%; background: var(--gold); display:inline-block;
    }

    /* Hover Overlay */
    .overlay{
      position:absolute; inset:0; display:grid; place-items:center; padding:20px;
      background: var(--overlay);
      opacity:0;
      transform: scale(0.98);
      transition: opacity .35s ease, transform .35s ease;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
    }
    .project-card:hover .overlay{ opacity:1; transform: scale(1) }
    .overlay-content{
      text-align:center; color:#fff; max-width: 90%;
      transform: translateY(10px);
      transition: transform .35s ease;
    }
    .project-card:hover .overlay-content{ transform: translateY(0) }
    .overlay-icon{
      width:44px; height:44px;
      display:grid; place-items:center;
      margin: 0 auto 10px;
      border-radius:12px;
      background: linear-gradient(135deg, var(--gold), var(--gold-600));
      box-shadow: 0 10px 24px rgba(0,0,0,0.2);
      color:#fff;
      opacity:0; transform: scale(.9);
      transition: opacity .35s ease, transform .35s ease;
    }
    .project-card:hover .overlay-icon{ opacity:1; transform: scale(1) }
    .overlay-title{ margin:6px 0 4px; font-weight:800; letter-spacing:.3px }
    .overlay-loc{ margin:0 0 8px; font-size:13px; opacity:.95 }
    .overlay-desc{ margin:0; font-size:13px; opacity:.95; line-height:1.45 }

    /* Enter / Leave animations for filtering */
    @keyframes cardIn{
      from{ opacity:0; transform: translateY(8px) scale(.98) }
      to{ opacity:1; transform: translateY(0) scale(1) }
    }
    .enter{
      animation: cardIn .42s cubic-bezier(.22,.61,.36,1) both;
    }
    .leave{
      opacity:0;
      transform: translateY(8px) scale(.98);
      transition: opacity .22s ease, transform .22s ease;
    }

    /* Empty state */
    .empty{
      border:1px dashed var(--border);
      border-radius:14px;
      padding:28px;
      text-align:center;
      color:var(--muted);
      background: color-mix(in oklab, var(--card) 86%, var(--bg));
    }
  </style>
</head>
<body>
  <main class="page">
    <section class="header">
      <div>
        <div class="title">
          <div class="title-badge" aria-hidden="true">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path d="M4 20h16M4 10l8-6 8 6M6 10v10M18 10v10M10 20v-6h4v6" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <h1>Projects</h1>
        </div>
        <p class="subtitle">Explore Arab Contractors' flagship projects across regions.</p>
      </div>

      <div class="count" id="countLabel">0 projects</div>
    </section>

    <section class="filters" aria-label="Project Filters">
      <div class="filter">
        <label class="label">Destination</label>
        <div class="tabs" id="destinationTabs" role="tablist" aria-label="Destination filter"></div>
      </div>

      <div class="filter">
        <label class="label" for="locationSelect">Location</label>
        <div class="select">
          <select id="locationSelect" aria-label="Location filter">
            <option value="all">All Locations</option>
          </select>
        </div>
      </div>
    </section>

    <section class="grid" id="projectsGrid" aria-live="polite" aria-busy="false"></section>
  </main>

  <script>
    // Sample Data (at least 6 projects)
    const projects = [
      {
        id: 1,
        title: "New Administrative Capital Central Business District",
        destination: "Egypt",
        location: "Cairo",
        image: "https://picsum.photos/seed/cairo-cbd/800/600",
        description: "Iconic high-rise development forming the heart of Egypt’s new capital."
      },
      {
        id: 2,
        title: "Alexandria Waterfront Revitalization",
        destination: "Egypt",
        location: "Alexandria",
        image: "https://picsum.photos/seed/alex-waterfront/800/600",
        description: "Upgrading coastal infrastructure and public realm along the Corniche."
      },
      {
        id: 3,
        title: "Sheikh Zayed Bridge Enhancement",
        destination: "UAE",
        location: "Abu Dhabi",
        image: "https://picsum.photos/seed/abudhabi-bridge/800/600",
        description: "Structural enhancements and intelligent transport systems integration."
      },
      {
        id: 4,
        title: "Dubai Creek Mixed-Use Park",
        destination: "UAE",
        location: "Dubai",
        image: "https://picsum.photos/seed/dubai-creek/800/600",
        description: "Green waterfront destination blending leisure with commerce."
      },
      {
        id: 5,
        title: "King Salman Road Interchange",
        destination: "KSA",
        location: "Riyadh",
        image: "https://picsum.photos/seed/riyadh-road/800/600",
        description: "High-capacity grade-separated interchange improving city mobility."
      },
      {
        id: 6,
        title: "Jeddah Waterfront Promenade",
        destination: "KSA",
        location: "Jeddah",
        image: "https://picsum.photos/seed/jeddah-promenade/800/600",
        description: "Public realm upgrades with resilient coastal protection solutions."
      },
      {
        id: 7,
        title: "Doha Metro Extension",
        destination: "Qatar",
        location: "Doha",
        image: "https://picsum.photos/seed/doha-metro/800/600",
        description: "Underground stations and tunneling for rapid urban transit."
      },
      {
        id: 8,
        title: "Lusail Marina District Infrastructure",
        destination: "Qatar",
        location: "Lusail",
        image: "https://picsum.photos/seed/lusail-marina/800/600",
        description: "Land development, utilities, and roadworks for a modern marina city."
      }
    ];

    // DOM refs
    const destinationTabs = document.getElementById('destinationTabs');
    const locationSelect = document.getElementById('locationSelect');
    const projectsGrid = document.getElementById('projectsGrid');
    const countLabel = document.getElementById('countLabel');
    let activeDestination = 'all';

    // Populate dropdowns
    function uniqueDestinations(list){
      return Array.from(new Set(list.map(p => p.destination))).sort();
    }
    function uniqueLocations(list, destination){
      const scoped = destination && destination !== 'all'
        ? list.filter(p => p.destination === destination)
        : list;
      return Array.from(new Set(scoped.map(p => p.location))).sort();
    }

    function buildDestinationTabs(){
      const dests = uniqueDestinations(projects);
      const items = ['all', ...dests];
      destinationTabs.innerHTML = '';
      items.forEach((val) => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'tab';
        btn.setAttribute('role','tab');
        btn.setAttribute('data-value', val);
        const selected = val === activeDestination;
        btn.setAttribute('aria-selected', selected ? 'true' : 'false');
        btn.tabIndex = selected ? 0 : -1;
        btn.textContent = val === 'all' ? 'All' : val;
        btn.addEventListener('click', () => {
          if(activeDestination === val) return;
          activeDestination = val;
          // update selected state
          Array.from(destinationTabs.children).forEach(child => {
            const isSel = child.getAttribute('data-value') === val;
            child.setAttribute('aria-selected', isSel ? 'true' : 'false');
            child.tabIndex = isSel ? 0 : -1;
          });
          fillLocationOptions(activeDestination);
          locationSelect.value = 'all';
          applyFilters();
        });
        destinationTabs.appendChild(btn);
      });
    }

    function fillLocationOptions(destValue){
      const locs = uniqueLocations(projects, destValue);
      locationSelect.innerHTML = `<option value="all">All Locations</option>` +
        locs.map(l => `<option value="${l}">${l}</option>`).join('');
    }

    // Filtering
    function applyFilters(){
      const dest = activeDestination;
      const loc = locationSelect.value;

      let filtered = projects.slice();
      if(dest !== 'all') filtered = filtered.filter(p => p.destination === dest);
      if(loc !== 'all') filtered = filtered.filter(p => p.location === loc);

      renderProjects(filtered);
      updateCount(filtered.length);
    }

    // Render helpers
    function updateCount(n){
      countLabel.textContent = `${n} project${n === 1 ? '' : 's'}`;
    }

    function createCard(p){
      const card = document.createElement('article');
      card.className = 'project-card enter';
      card.setAttribute('tabindex','0');
      card.innerHTML = `
        <img class="project-image" src="${p.image}" alt="${p.title}" loading="lazy">
        <div class="project-body">
          <div class="project-info">
            <h3 class="project-title" title="${p.title}">${p.title}</h3>
            <div class="project-meta" title="${p.destination} • ${p.location}">
              <span class="dot" aria-hidden="true"></span>
              <span>${p.destination}</span>
              <span>•</span>
              <span>${p.location}</span>
            </div>
          </div>
        </div>

        <div class="overlay" aria-hidden="true">
          <div class="overlay-content">
            <div class="overlay-icon">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M4 20h16M4 10l8-6 8 6M6 10v10M18 10v10M10 20v-6h4v6" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="overlay-title">${p.title}</div>
            <div class="overlay-loc">${p.destination} • ${p.location}</div>
            <p class="overlay-desc">${p.description}</p>
          </div>
        </div>
      `;
      return card;
    }

    // Smooth list transition: fade out old → render new with staggered enter
    function renderProjects(list){
      // 1) Leave animation for current cards
      const currentCards = Array.from(projectsGrid.children);
      if(currentCards.length){
        projectsGrid.setAttribute('aria-busy','true');
        currentCards.forEach((el, i) => {
          el.classList.add('leave');
          el.style.transitionDelay = `${i * 60}ms`;
        });

        // Wait for the last leave to finish, then swap content
        const totalLeave = (currentCards.length - 1) * 60 + 240;
        setTimeout(() => {
          projectsGrid.innerHTML = '';
          insertNew(list);
          projectsGrid.setAttribute('aria-busy','false');
        }, totalLeave);
      }else{
        // First render (no leave needed)
        insertNew(list);
      }
    }

    function insertNew(list){
      if(!list.length){
        const empty = document.createElement('div');
        empty.className = 'empty';
        empty.textContent = 'No projects match your filters.';
        projectsGrid.appendChild(empty);
        return;
      }
      list.forEach((p, i) => {
        const card = createCard(p);
        card.style.animationDelay = `${i * 70}ms`;
        projectsGrid.appendChild(card);
      });
      // Clean up enter class after all run (optional)
      const totalEnter = (list.length - 1) * 70 + 500;
      setTimeout(() => {
        projectsGrid.querySelectorAll('.enter').forEach(el => el.classList.remove('enter'));
      }, totalEnter);
    }

    // Events
    locationSelect.addEventListener('change', applyFilters);

    // Init
    buildDestinationTabs();
    fillLocationOptions('all');
    applyFilters();
  </script>
</body>
</html>